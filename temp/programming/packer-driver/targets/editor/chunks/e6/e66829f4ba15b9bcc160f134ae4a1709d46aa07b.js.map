{"version":3,"sources":["file:///D:/ThanhPhong/FE02/Project-FrontEnd2/assets/Scripts/PipePool.ts"],"names":["_decorator","Component","instantiate","Node","NodePool","Prefab","ccclass","property","PipePool","type","tooltip","pool","createPipe","initPool","initCount","i","prefabPipes","pipePoolHome","addChild","put","addPool","size","get","reset","removeAllChildren","clear"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,M,OAAAA,M;;;;;;;;;OACvD;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;0BAGjBQ,Q,WADZF,OAAO,CAAC,UAAD,C,UAIHC,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEJ,MAAR;AAAgBK,QAAAA,OAAO,EAAE;AAAzB,OAAD,C,UAIRH,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEN,IAAR;AAAcO,QAAAA,OAAO,EAAE;AAAvB,OAAD,C,2BARb,MACaF,QADb,SAC8BP,SAD9B,CAEA;AAAA;AAAA;;AACI;AADJ;;AAKI;AALJ;;AASI;AATJ,eAUWU,IAVX,GAUkB,IAAIP,QAAJ,EAVlB;AAAA,eAWWQ,UAXX,GAW8B,IAX9B;AAAA;;AAaI;AACAC,QAAAA,QAAQ,GACR;AACI;AACA,cAAIC,SAAS,GAAG,CAAhB,CAFJ,CAII;;AACA,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,SAApB,EAA+BC,CAAC,EAAhC,EACA;AACI;AACA,gBAAIH,UAAU,GAAGV,WAAW,CAAC,KAAKc,WAAN,CAA5B,CAFJ,CAEoD;AAEhD;;AACA,gBAAID,CAAC,IAAI,CAAT,EACA;AACI,mBAAKE,YAAL,CAAkBC,QAAlB,CAA2BN,UAA3B;AACH,aAHD,CAIA;AAJA,iBAMA;AACI,mBAAKD,IAAL,CAAUQ,GAAV,CAAcP,UAAd;AACH;AACJ;AACJ,SApCL,CAsCI;;;AACAQ,QAAAA,OAAO,GACP;AACI;AACA,cAAI,KAAKT,IAAL,CAAUU,IAAV,KAAmB,CAAvB,EACA;AACI;AACA,iBAAKT,UAAL,GAAkB,KAAKD,IAAL,CAAUW,GAAV,EAAlB;AACH,WAJD,MAMA;AACI;AACA,iBAAKV,UAAL,GAAkBV,WAAW,CAAC,KAAKc,WAAN,CAA7B;AACH,WAXL,CAYI;;;AACA,eAAKC,YAAL,CAAkBC,QAAlB,CAA2B,KAAKN,UAAhC;AACH,SAtDL,CAwDI;;;AACAW,QAAAA,KAAK,GACL;AACI;AACA,eAAKN,YAAL,CAAkBO,iBAAlB;AACA,eAAKb,IAAL,CAAUc,KAAV,GAHJ,CAII;;AACA,eAAKZ,QAAL;AACH;;AAhEL,O;;;;;iBAGyB,I","sourcesContent":["import { _decorator, Component, instantiate, Node, NodePool, Prefab } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('PipePool')\r\nexport class PipePool extends Component \r\n{\r\n    // Định nghĩa thuộc tính prefabPipes, loại Prefab, được sử dụng để tạo các ống mới\r\n    @property({ type: Prefab, tooltip: 'Prefab Pipes' })\r\n    public prefabPipes = null;\r\n\r\n    // Định nghĩa thuộc tính pipePoolHome, loại Node, là nơi chứa các ống mới được tạo\r\n    @property({ type: Node, tooltip: 'Where the new pipes go' })\r\n    public pipePoolHome;\r\n\r\n    // Khởi tạo một NodePool để quản lý các ống (pipes)\r\n    public pool = new NodePool();\r\n    public createPipe: Node = null;\r\n\r\n    // Phương thức khởi tạo bể (pool) các ống\r\n    initPool ()\r\n    {\r\n        // Số lượng ống ban đầu cần tạo\r\n        let initCount = 3;\r\n\r\n        // Điền vào bể các ống (pipes)\r\n        for (let i = 0; i < initCount; i++)\r\n        {\r\n            // Tạo một node mới từ prefab\r\n            let createPipe = instantiate(this.prefabPipes); // instantiate nghĩa là tạo một bản sao của prefab gốc\r\n            \r\n            // Đưa ống đầu tiên lên màn hình bằng cách thêm nó vào pipePoolHome\r\n            if (i == 0)\r\n            {\r\n                this.pipePoolHome.addChild(createPipe);\r\n            } \r\n            // Đưa các ống khác vào NodePool để quản lý\r\n            else\r\n            {\r\n                this.pool.put(createPipe);\r\n            }\r\n        }\r\n    }\r\n\r\n    // Phương thức thêm ống mới vào bể\r\n    addPool ()\r\n    {\r\n        // Kiểm tra nếu bể không đầy thì thêm ống mới, nếu không thì lấy ống đầu tiên trong bể\r\n        if (this.pool.size() > 0)\r\n        {\r\n            // Lấy một ống từ bể\r\n            this.createPipe = this.pool.get();\r\n        } \r\n        else\r\n        {\r\n            // Tạo một ống mới\r\n            this.createPipe = instantiate(this.prefabPipes);\r\n        }\r\n        // Thêm ống vào trò chơi như một node\r\n        this.pipePoolHome.addChild(this.createPipe);\r\n    }\r\n\r\n    // Phương thức đặt lại (reset) bể các ống\r\n    reset ()\r\n    {\r\n        // Xóa tất cả các node con khỏi pipePoolHome và làm sạch bể\r\n        this.pipePoolHome.removeAllChildren();\r\n        this.pool.clear();\r\n        // Khởi tạo lại bể các ống\r\n        this.initPool();\r\n    }\r\n}\r\n"]}